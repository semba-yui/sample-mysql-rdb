# m_role_permission

## 概要

ロールパーミッションマスタ

<details>
<summary><strong>テーブル定義</strong></summary>

```sql
CREATE TABLE `m_role_permission` (
  `role_id` bigint unsigned NOT NULL COMMENT 'ロールID',
  `perm_id` bigint unsigned NOT NULL COMMENT 'パーミッションID',
  `valid_from` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '付与開始日時',
  `valid_to` datetime NOT NULL DEFAULT '9999-12-31 23:59:59' COMMENT '付与終了日時',
  `deleted_at` datetime DEFAULT NULL COMMENT '論理削除日時',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '登録日時',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新日時',
  UNIQUE KEY `role_id` (`role_id`,`perm_id`,`deleted_at`),
  KEY `role_id_2` (`role_id`,`valid_from`,`valid_to`),
  KEY `perm_id` (`perm_id`),
  CONSTRAINT `m_role_permission_ibfk_1` FOREIGN KEY (`role_id`) REFERENCES `m_role` (`role_id`),
  CONSTRAINT `m_role_permission_ibfk_2` FOREIGN KEY (`perm_id`) REFERENCES `m_permission` (`perm_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_ja_0900_as_cs_ks COMMENT='ロールパーミッションマスタ'
```

</details>

## カラム一覧

| # | 名前         | タイプ             | デフォルト値              | Nullable | Extra Definition                              | 子テーブル      | 親テーブル                           | コメント             |
| - | ---------- | --------------- | ------------------- | -------- | --------------------------------------------- | ---------- | ------------------------------- | ---------------- |
| 1 | role_id    | bigint unsigned |                     | false    |                                               |            | [m_role](m_role.md)             | ロールID            |
| 2 | perm_id    | bigint unsigned |                     | false    |                                               |            | [m_permission](m_permission.md) | パーミッションID        |
| 3 | valid_from | datetime        | CURRENT_TIMESTAMP   | false    | DEFAULT_GENERATED                             |            |                                 | 付与開始日時           |
| 4 | valid_to   | datetime        | 9999-12-31 23:59:59 | false    |                                               |            |                                 | 付与終了日時           |
| 5 | deleted_at | datetime        |                     | true     |                                               |            |                                 | 論理削除日時           |
| 6 | created_at | datetime        | CURRENT_TIMESTAMP   | false    | DEFAULT_GENERATED                             |            |                                 | 登録日時             |
| 7 | updated_at | datetime        | CURRENT_TIMESTAMP   | false    | DEFAULT_GENERATED on update CURRENT_TIMESTAMP |            |                                 | 更新日時             |

## 制約一覧

| # | 名前                       | タイプ         | 定義                                                      |
| - | ------------------------ | ----------- | ------------------------------------------------------- |
| 1 | m_role_permission_ibfk_1 | FOREIGN KEY | FOREIGN KEY (role_id) REFERENCES m_role (role_id)       |
| 2 | m_role_permission_ibfk_2 | FOREIGN KEY | FOREIGN KEY (perm_id) REFERENCES m_permission (perm_id) |
| 3 | role_id                  | UNIQUE      | UNIQUE KEY role_id (role_id, perm_id, deleted_at)       |

## INDEX一覧

| # | 名前        | 定義                                                            |
| - | --------- | ------------------------------------------------------------- |
| 1 | perm_id   | KEY perm_id (perm_id) USING BTREE                             |
| 2 | role_id_2 | KEY role_id_2 (role_id, valid_from, valid_to) USING BTREE     |
| 3 | role_id   | UNIQUE KEY role_id (role_id, perm_id, deleted_at) USING BTREE |

## ER図

![er](m_role_permission.svg)

---

> Generated by [tbls](https://github.com/k1LoW/tbls)
